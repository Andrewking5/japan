<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>日本關西之旅 - 智能行程規劃</title>
    <link rel="stylesheet" href="styles_detailed.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* 額外的增強樣式 */
        .search-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: transform 0.3s ease;
        }
        
        .search-btn:hover {
            transform: translateY(-2px);
        }
        
        .detail-btn {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            color: #667eea;
            padding: 5px 8px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }
        
        .detail-btn:hover {
            background: #667eea;
            color: white;
            transform: scale(1.1);
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease;
        }
        
        .modal-header {
            padding: 20px 30px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h2 {
            color: #333;
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .close {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        
        .close:hover {
            color: #667eea;
        }
        
        .modal-body {
            padding: 30px;
        }
        
        .search-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .search-container input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            font-size: 1rem;
            outline: none;
            transition: border-color 0.3s ease;
        }
        
        .search-container input:focus {
            border-color: #667eea;
        }
        
        .search-container button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: transform 0.3s ease;
        }
        
        .search-container button:hover {
            transform: translateY(-2px);
        }
        
        .search-result-item {
            padding: 15px;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .search-result-item:hover {
            background: #f8f9fa;
            border-color: #667eea;
            transform: translateX(5px);
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .nav-actions {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .hero-actions {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
        }
        
        .btn-primary, .btn-secondary {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .btn-primary:hover, .btn-secondary:hover {
            transform: translateY(-3px);
        }

        /* 預約比價：左右滑動走馬燈 */
        .booking-list {
            display: flex;
            gap: 16px;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            padding: 8px 2px 12px;
        }
        .booking-list::-webkit-scrollbar { display: none; }
        .booking-card {
            flex: 0 0 85%;
            max-width: 85%;
            scroll-snap-align: start;
        }
        @media (min-width: 768px) {
            .booking-card { flex-basis: 60%; max-width: 60%; }
        }
        @media (min-width: 1024px) {
            .booking-card { flex-basis: 45%; max-width: 45%; }
        }
        .booking-carousel-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: flex-end;
            margin: 8px 0 12px;
        }
        .booking-carousel-controls .carousel-btn {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            color: #667eea;
            padding: 10px 12px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .booking-carousel-controls .carousel-btn:hover {
            background: #667eea;
            color: #fff;
        }

        /* 分頁指示點 */
        .booking-dots {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin: 6px 0 14px;
        }
        .booking-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #e5e7eb;
            cursor: pointer;
            transition: transform 0.2s ease, background 0.2s ease;
        }
        .booking-dot:hover { transform: scale(1.15); }
        .booking-dot.active { background: #667eea; }
    </style>
</head>
<body>
    <!-- 導航欄 -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-plane"></i>
                <span>日本關西之旅</span>
            </div>
            <ul class="nav-menu">
                <li><a href="#overview" class="nav-link">行程概覽</a></li>
                <li><a href="#schedule" class="nav-link">每日行程</a></li>
                <li><a href="#bookings" class="nav-link">預定清單</a></li>
                <li><a href="#budget" class="nav-link">預算追蹤</a></li>
                <li><a href="#maps" class="nav-link">地圖導航</a></li>
                <li><a href="#tips" class="nav-link">實用提醒</a></li>
            </ul>
            <div class="nav-actions">
                <button class="search-btn" onclick="showSearchModal()">
                    <i class="fas fa-search"></i>
                </button>
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </nav>

    <!-- 英雄區域 -->
    <header class="hero">
        <div class="hero-content">
            <h1>日本關西深度之旅</h1>
            <p>2025年9月30日 - 10月6日 | 7天6夜精彩行程</p>
            <div class="hero-stats">
                <div class="stat">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>3個城市</span>
                </div>
                <div class="stat">
                    <i class="fas fa-utensils"></i>
                    <span>15+美食</span>
                </div>
                <div class="stat">
                    <i class="fas fa-camera"></i>
                    <span>20+景點</span>
                </div>
            </div>
            <div class="hero-actions">
                <button class="btn-primary" onclick="showSearchModal()">
                    <i class="fas fa-search"></i>
                    搜尋景點詳情
                </button>
                <button class="btn-secondary" onclick="scrollToSection('schedule')">
                    <i class="fas fa-calendar"></i>
                    查看行程
                </button>
            </div>
        </div>
        <div class="hero-image">
            <div class="floating-card">
                <h3>行程進度</h3>
                <div class="progress-bar">
                    <div class="progress" style="width: 75%"></div>
                </div>
                <p>75% 已完成規劃</p>
            </div>
        </div>
    </header>

    <!-- 行程概覽 -->
    <section id="overview" class="section">
        <div class="container">
            <h2 class="section-title">📋 行程概覽</h2>
            <div class="overview-grid">
                <div class="overview-card">
                    <div class="card-icon">
                        <i class="fas fa-hotel"></i>
                    </div>
                    <h3>住宿安排</h3>
                    <p>OASIS NANIWA 酒店<br>5人入住，6晚住宿</p>
                    <span class="status completed">已確認</span>
                </div>
                <div class="overview-card">
                    <div class="card-icon">
                        <i class="fas fa-train"></i>
                    </div>
                    <h3>交通規劃</h3>
                    <p>JR關西周遊券<br>西瓜卡 + 地鐵</p>
                    <span class="status pending">待預定</span>
                </div>
                <div class="overview-card">
                    <div class="card-icon">
                        <i class="fas fa-ticket-alt"></i>
                    </div>
                    <h3>門票預定</h3>
                    <p>環球影城門票<br>嵐山小火車</p>
                    <span class="status pending">待預定</span>
                </div>
                <div class="overview-card">
                    <div class="card-icon">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <h3>餐廳預定</h3>
                    <p>貴桑桑燒肉<br>其他特色餐廳</p>
                    <span class="status pending">待預定</span>
                </div>
            </div>
        </div>
    </section>

    <!-- 每日行程 -->
    <section id="schedule" class="section">
        <div class="container">
            <h2 class="section-title">📅 每日行程</h2>
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-date">Day 1<br>9/30 (二)</div>
                    <div class="timeline-content">
                        <h3>抵達關西 - 梅田</h3>
                        <div class="schedule-details">
                            <div class="time-slot">
                                <span class="time">10:25</span>
                                <span class="activity">抵達關西機場</span>
                                <button class="detail-btn" onclick="showLocationDetail('關西機場', 'airport')">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                            <div class="time-slot">
                                <span class="time">11:30</span>
                                <span class="activity">出關 → 搭乘HARUKA到大阪車站</span>
                            </div>
                            <div class="time-slot">
                                <span class="time">13:10</span>
                                <span class="activity">香料牛逼特色嘎李</span>
                                <span class="backup">備選：烏龍麵 (現場排到15:30)</span>
                                <button class="detail-btn" onclick="showLocationDetail('香料牛逼特色嘎李', 'restaurant')">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                            <div class="time-slot">
                                <span class="time">15:30</span>
                                <span class="activity">大丸梅田店寶可夢任天堂</span>
                                <button class="detail-btn" onclick="showLocationDetail('大丸梅田店寶可夢任天堂', 'shopping')">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                            <div class="time-slot">
                                <span class="time">18:00</span>
                                <span class="activity">大阪梅田貴桑桑燒肉</span>
                                <span class="note">7月預定，步行約7-10分鐘</span>
                                <button class="detail-btn" onclick="showLocationDetail('貴桑桑燒肉', 'restaurant')">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                            <div class="time-slot">
                                <span class="time">20:00</span>
                                <span class="activity">梅田天空嚇死人大樓</span>
                                <span class="note">從大阪站中央北口步行約7分鐘</span>
                                <button class="detail-btn" onclick="showLocationDetail('梅田天空大樓', 'attraction')">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-date">Day 2<br>10/1 (三)</div>
                    <div class="timeline-content">
                        <h3>環球影城 + 通天閣</h3>
                        <div class="schedule-details">
                            <div class="time-slot">
                                <span class="time">09:00</span>
                                <span class="activity">抵達環球影城</span>
                                <span class="transport">堺筋線天下茶屋→動物園前→大阪環狀線新今宮→西九條→JR夢咲線→環球城</span>
                                <button class="detail-btn" onclick="showLocationDetail('環球影城', 'attraction')">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                            <div class="time-slot">
                                <span class="time">19:00</span>
                                <span class="activity">離開環球影城</span>
                                <span class="important">記得退稅！</span>
                            </div>
                            <div class="time-slot">
                                <span class="time">19:30</span>
                                <span class="activity">烏龍麵棒大阪店</span>
                                <span class="backup">備案：大阪燒 (開到21:00)</span>
                                <button class="detail-btn" onclick="showLocationDetail('烏龍麵棒大阪店', 'restaurant')">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                            <div class="time-slot">
                                <span class="time">21:00</span>
                                <span class="activity">心齋橋逛街</span>
                                <button class="detail-btn" onclick="showLocationDetail('心齋橋', 'shopping')">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-date">Day 3<br>10/2 (四)</div>
                    <div class="timeline-content">
                        <h3>京都一日遊</h3>
                        <div class="schedule-details">
                            <div class="time-slot">
                                <span class="time">07:30</span>
                                <span class="activity">起床前往稻荷神社</span>
                            </div>
                            <div class="time-slot">
                                <span class="time">08:30</span>
                                <span class="activity">伏見稻荷大社</span>
                                <button class="detail-btn" onclick="showLocationDetail('伏見稻荷大社', 'attraction')">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                            <div class="time-slot">
                                <span class="time">12:00</span>
                                <span class="activity">清水寺</span>
                                <button class="detail-btn" onclick="showLocationDetail('清水寺', 'attraction')">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                            <div class="time-slot">
                                <span class="time">13:30</span>
                                <span class="activity">錦市場</span>
                                <span class="important">現金需要</span>
                                <span class="transport">清水寺→祇園四条站→阪急烏丸站→步行5分鐘</span>
                                <button class="detail-btn" onclick="showLocationDetail('錦市場', 'shopping')">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-date">Day 4<br>10/3 (五)</div>
                    <div class="timeline-content">
                        <h3>嵐山竹林</h3>
                        <div class="schedule-details">
                            <div class="time-slot">
                                <span class="time">10:35</span>
                                <span class="activity">竹林小徑、野宮神社</span>
                                <span class="important">要搭小火車需預約 (嵯峨野トロッコ列車)</span>
                                <button class="detail-btn" onclick="showLocationDetail('嵐山竹林小徑', 'attraction')">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                            <div class="time-slot">
                                <span class="time">12:30</span>
                                <span class="activity">嵐山よしむら</span>
                                <button class="detail-btn" onclick="showLocationDetail('嵐山よしむら', 'restaurant')">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-date">Day 5<br>10/4 (六)</div>
                    <div class="timeline-content">
                        <h3>宇治抹茶之旅</h3>
                        <div class="schedule-details">
                            <div class="time-slot">
                                <span class="time">09:00</span>
                                <span class="activity">平等院鳳凰堂參觀</span>
                                <span class="note">世界遺產，光線最佳、人潮最少</span>
                                <button class="detail-btn" onclick="showLocationDetail('平等院鳳凰堂', 'attraction')">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                            <div class="time-slot">
                                <span class="time">11:30</span>
                                <span class="activity">午餐自由選擇</span>
                                <span class="backup">中村藤吉、伊藤久右衛門、茶蕎麥麵</span>
                                <button class="detail-btn" onclick="showLocationDetail('中村藤吉', 'restaurant')">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-date">Day 6<br>10/5 (日)</div>
                    <div class="timeline-content">
                        <h3>大阪城 + 黑門市場</h3>
                        <div class="schedule-details">
                            <div class="time-slot">
                                <span class="time">09:45</span>
                                <span class="activity">大阪城、小車車</span>
                                <span class="price">¥300/人，可坐一圈園區</span>
                                <button class="detail-btn" onclick="showLocationDetail('大阪城', 'attraction')">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                            <div class="time-slot">
                                <span class="time">12:00</span>
                                <span class="activity">黑門市場午餐 & 逛街</span>
                                <span class="transport">地鐵長堀鶴見綠地線至心齋橋站，步行10分鐘</span>
                                <button class="detail-btn" onclick="showLocationDetail('黑門市場', 'shopping')">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-date">Day 7<br>10/6 (一)</div>
                    <div class="timeline-content">
                        <h3>瘋狂購物日</h3>
                        <div class="schedule-details">
                            <div class="time-slot">
                                <span class="time">14:30</span>
                                <span class="activity">臨空城RP Outlet</span>
                                <span class="note">可逛1.5小時，注意機場報到時間</span>
                                <button class="detail-btn" onclick="showLocationDetail('臨空城Outlet', 'shopping')">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 預定清單 / 預約比價 -->
    <section id="bookings" class="section">
        <div class="container">
            <h2 class="section-title">🧾 預約比價</h2>
            <div class="booking-controls">
                <div class="fx-rate">
                    <label for="fxRateInput">匯率 JPY→TWD：</label>
                    <input id="fxRateInput" type="number" step="0.0001" min="0" value="0.22" />
                    <small>用於將日幣換算成台幣以比較價格</small>
                </div>
                <div class="booking-actions">
                    <button class="btn-primary" id="resetBookingPricesBtn"><i class="fas fa-rotate"></i> 清空已輸入價格</button>
                </div>
            </div>
            <div class="booking-carousel-controls">
                <button class="carousel-btn" id="bookingPrev" title="往左"><i class="fas fa-chevron-left"></i></button>
                <button class="carousel-btn" id="bookingNext" title="往右"><i class="fas fa-chevron-right"></i></button>
            </div>
            <div id="bookingList" class="booking-list"></div>
            <div id="bookingDots" class="booking-dots" aria-label="分頁指示點"></div>
        </div>
    </section>

    <!-- 實用提醒 -->
    <section id="tips" class="section">
        <div class="container">
            <h2 class="section-title">💡 實用提醒</h2>
            <div class="tips-grid">
                <div class="tip-card">
                    <div class="tip-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h3>重要時間點</h3>
                    <ul>
                        <li>7月：預定JR關西周遊券</li>
                        <li>7月：預定貴桑桑燒肉</li>
                        <li>提前3-6個月：預定住宿</li>
                        <li>提前2-3個月：預定環球影城門票</li>
                        <li>提前1個月：預定嵐山小火車</li>
                    </ul>
                </div>
                <div class="tip-card">
                    <div class="tip-icon">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                    <h3>退稅提醒</h3>
                    <ul>
                        <li>環球影城購物記得退稅</li>
                        <li>藥妝店購物可退稅</li>
                        <li>百貨公司購物可退稅</li>
                        <li>記得帶護照</li>
                    </ul>
                </div>
                <div class="tip-card">
                    <div class="tip-icon">
                        <i class="fas fa-suitcase"></i>
                    </div>
                    <h3>行李寄存</h3>
                    <ul>
                        <li>住宿一樓免費寄存</li>
                        <li>服務時間：AM 8:00 ~ PM 10:00</li>
                        <li>車站也有寄存服務</li>
                        <li>最後一天記得取行李</li>
                    </ul>
                </div>
                <div class="tip-card">
                    <div class="tip-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <h3>注意事項</h3>
                    <ul>
                        <li>錦市場需要現金</li>
                        <li>串かつ二度付け禁止</li>
                        <li>部分餐廳需要預定</li>
                        <li>注意機場報到時間</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- 搜尋模態框 -->
    <div id="searchModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>🔍 搜尋景點詳情</h2>
                <span class="close" onclick="closeSearchModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="輸入景點名稱..." onkeyup="searchLocations()">
                    <button onclick="searchLocations()">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                <div class="search-results" id="searchResults">
                    <!-- 搜尋結果將在這裡顯示 -->
                </div>
            </div>
        </div>
    </div>

    <!-- 景點詳情模態框 -->
    <div id="locationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="locationTitle">景點詳情</h2>
                <span class="close" onclick="closeLocationModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div id="locationContent">
                    <!-- 景點詳情將在這裡顯示 -->
                </div>
            </div>
        </div>
    </div>

    <script src="script_enhanced.js?v=3"></script>
</body>
</html>
